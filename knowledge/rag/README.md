# RAG知识库总览

> 检索增强生成(RAG)知识库为AI代码审查助手提供安全知识和最佳实践支持

## 知识库结构

```
knowledge/rag/
├── security/           # 安全漏洞知识
│   ├── sql-injection/  # SQL注入
│   ├── xss/           # 跨站脚本攻击
│   ├── csrf/          # 跨站请求伪造
│   ├── ssrf/          # 服务器端请求伪造
│   ├── jwt/           # JWT安全
│   └── ...            # 更多漏洞类型
├── languages/         # 编程语言安全
│   ├── python/        # Python安全实践
│   ├── javascript/    # JavaScript安全实践
│   ├── java/          # Java安全实践
│   └── ...            # 更多语言
├── frameworks/        # 框架安全
│   ├── django/        # Django安全
│   ├── flask/         # Flask安全
│   ├── react/         # React安全
│   └── ...            # 更多框架
├── architecture/      # 架构安全
│   ├── microservices/ # 微服务安全
│   ├── api-design/    # API设计安全
│   └── ...            # 更多架构
└── tools/            # 工具与配置
    ├── docker/        # Docker安全
    ├── kubernetes/    # Kubernetes安全
    └── ...            # 更多工具
```

## 已包含的安全知识

### 1. 核心安全漏洞
- **SQL注入**: 详细的SQL注入攻击技术、检测方法和防御措施
- **XSS**: 跨站脚本攻击类型、payloads和防护策略
- **CSRF**: 跨站请求伪造攻击场景和防护机制
- **SSRF**: 服务器端请求伪造攻击和防护
- **JWT**: JWT安全漏洞、攻击技术和最佳实践

### 2. 编程语言安全
- **Python**: Python安全编码实践、常见漏洞和框架安全

## 使用指南

### 1. 代码审查集成
在代码审查过程中，RAG系统会根据以下因素检索相关知识：
- **文件类型**: 根据文件扩展名匹配对应语言的安全知识
- **框架检测**: 根据项目配置文件识别使用的框架
- **漏洞模式**: 基于代码模式匹配潜在的安全漏洞

### 2. 知识检索优先级
1. **安全漏洞知识** (最高优先级)
2. **语言特定知识** (中等优先级)
3. **框架最佳实践** (中等优先级)
4. **通用安全原则** (基础优先级)

### 3. 动态更新机制
- 定期更新已知漏洞信息
- 添加新的攻击技术和防护方法
- 根据实际审查结果优化知识库

## 扩展计划

### 第一阶段 (已完成)
- [x] 核心安全漏洞文档
- [x] Python语言安全指南
- [x] 基础RAG集成

### 第二阶段 (待实施)
- [ ] JavaScript安全指南
- [ ] Java安全指南
- [ ] 框架特定安全知识
- [ ] API安全设计

### 第三阶段 (待规划)
- [ ] 云原生安全
- [ ] DevSecOps实践
- [ ] 合规性要求
- [ ] 威胁建模

## 贡献指南

### 添加新漏洞类型
1. 在`security/`目录下创建新文件夹
2. 编写详细的README.md包含：
   - 漏洞描述和原理
   - 攻击场景和示例
   - 检测方法
   - 防御措施
   - 代码示例

### 添加语言特定知识
1. 在`languages/`目录下创建对应语言文件夹
2. 包含：
   - 语言特有的安全模式
   - 常见漏洞和防护
   - 框架集成安全
   - 最佳实践

### 更新现有知识
1. 基于实际审查经验补充案例
2. 更新最新的攻击技术
3. 添加新的防护方法

## 质量保证

### 1. 内容验证
- 所有安全知识经过实际测试验证
- 代码示例可直接运行
- 提供完整的攻击和防御场景

### 2. 持续更新
- 跟踪最新安全研究
- 集成CVE和NVD数据
- 社区贡献和反馈

### 3. 实用性验证
- 在真实代码审查中测试
- 收集使用反馈
- 优化检索效果

## 技术实现

### 1. 知识索引
- 使用BM25算法进行文本检索
- 支持语义搜索
- 按相关性和优先级排序

### 2. 上下文感知
- 根据代码上下文调整检索策略
- 考虑项目技术栈
- 动态权重调整

### 3. 集成方式
- 与技能系统深度集成
- 支持实时知识更新
- 提供API接口

## 使用示例

### 代码审查场景
当审查一个Python Flask应用时：
1. 检测文件类型 → 激活Python安全知识
2. 识别Flask框架 → 加载Flask特定安全模式
3. 发现SQL查询 → 检索SQL注入防护知识
4. 发现用户输入 → 加载输入验证最佳实践

### 知识检索示例
```python
# 检索SQL注入相关知识
sql_injection_knowledge = rag_service.search(
    query="SQL injection in Python Flask",
    context={"language": "python", "framework": "flask"}
)

# 检索JWT安全知识
jwt_security = rag_service.search(
    query="JWT validation Python",
    context={"language": "python", "vulnerability": "jwt"}
)
```

## 联系方式

如需添加新的安全知识或改进现有内容，请通过以下方式联系：
- GitHub Issues
- 安全研究社区
- 代码审查反馈

## 许可证

本知识库采用MIT许可证，鼓励社区贡献和共享。
